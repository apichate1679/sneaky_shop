<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Add new product</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='style.css'>
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="/img/logo.png" type="image/png" rel="shortcut icon" />
</head>
<body>
    <header class="l-header" id="header">
        <nav class="nav bd-grid">
            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bxs-grid'></i>
            </div>

            <div class="nav__logo">
                <img id="logo_s" src="./img/Logo.png" alt="Logo Sneaky Shop">
                <a href="#" >Sneaky Shop</a>
            </div>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link ">Back</a></li>
                    <li class="nav__item"><a href="index_login.html" class="nav__link ">Log Out</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="1-main">
        <section class="new__cargo ">
            <h2 class="section-title">Add Product</h2>
            <div class="container bd-grid">
                <form id="add_cargo" class="add__cargo">
                    <h1>Add new Product</h1>
                    <input type="file" id="cargo_uploader">
                    <br>
                    <input type="text" placeholder="name" id="cargo_name">
                    <br>
                    <input type="text" placeholder="price" id="cargo_price">
                    <br>
                    <button>submit</button>
                </form>
            </div>
        </section>
    </div>
    <script>
        $(document).ready(()=>{
            const uploader = document.getElementById("cargo_uploader")
            $("#add_cargo").submit((e)=>{
                e.preventDefault()
                const cargoName = $("#cargo_name").val()
                const cargoPrice = $("#cargo_price").val()
                const data = new FormData()
                data.append("image", uploader.files[0])
                data.append("name", cargoName)
                data.append("price", cargoPrice)
                $.ajax({
                    url: '/api/user/insertCargo',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false,
                    method: 'POST',
                    type: 'POST',
                    success: function(data){
                        console.log(data);
                        if (data.status === "success") {
                            location.href = "/index.html"
                        }else{
                            alert("fail to add new cargo try again later.")
                        }
                    }
                })
            })
        })
    </script>

    <footer class="footer section">
        <div class="footer__container bd-grid">
            <div class="footer__box">
                <h3 class="footer__title">Sneaky Shop</h3>
                <p class="footer__description">New collection of sneakers 2021.</p>
            </div>

            <div class="footer__box">
                <h3 class="footer__title">EXPLORE</h3>
                <ul>
                    <li><a href="#home" class="footer__link">Home</a></li><br>
                    <li><a href="#new" class="footer__link">New Realease</a></li><br>
                    <li><a href="#product" class="footer__link">Products</a></li>
                </ul>                  
            </div>

            <div class="footer__box">
                <h3 class="footer__title">SUPPORT</h3>
                <ul>
                    <li><a href="https://www.facebook.com/apichate.vuttiosod/" class="footer__link">Product Help</a></li>
                    <li><a href="https://www.facebook.com/profile.php?id=100007750321878" class="footer__link">Customer Care</a></li>
                    <li><a href="https://www.facebook.com/thanadol.nontanum" class="footer__link">Athorized service</a></li>
                </ul>                  
            </div>
            
            <div class="footer__box">
                <a class="footer__social"><i class='bx bxl-cas' ></i></a>
                <a class="footer__social"><i class='bx bxl-visa' ></i></a>
                <a class="footer__social"><i class='bx bxl-mastercard' ></i></a>
                <a class="footer__social"><i class='bx bxl-paypal' ></i></a>
                
            </div>
        </div>
        <p class="footer__copy">&#169; 2021 Sneaky Shop. All right reserved</p>
    </footer>  
</body>
</html>
